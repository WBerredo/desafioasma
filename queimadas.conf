input {
  file {
    path => ["/home/berredo/Documents/desafioasma/queimadas/Focos.2008-01-01.2009-01-01.csv"]
    start_position => "beginning"
    sincedb_path => "/dev/null"
  }
}

filter {
  csv {
    columns => [
       "DataHora",
       "Satelite",
       "Pais",
       "Estado",
       "Municipio",
       "Bioma",
       "DiaSemCh",
       "Precipit",
       "RiscoFog",
       "Latitude",
       "Longitude",
       "AreaIndu",
       "FRP"
      ]
      separator => ";"
  }

  mutate {
    add_field => {
      "localizacao" => "%{Latitude}, %{Longitude}"
    }
    remove_field => ["message", "path", "host"]
  }

  date {
    match => ["DataHora", "yyyy/MM/dd HH:mm:ss"]
    target => "@timestamp"
  }

  mutate {
    convert => { 
    }
  }
}

output {
#   stdout { codec => rubydebug }
#   amazon_es {
#     action => "index"
#     hosts => "search-iron-lungs-7l4zfrsvb74dctskmsyj5xac3i.us-east-2.es.amazonaws.com"
#     region => "us-east-2"
#     index => "asma_30_69"
#   }
  elasticsearch {
    action => "index"
    hosts => ["search-iron-lungs-7l4zfrsvb74dctskmsyj5xac3i.us-east-2.es.amazonaws.com:443"]
    index => "queimadas"
    ssl => true
  }
}
